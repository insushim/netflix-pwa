<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netflix Desktop</title>
    
    <!-- PWA Îß§ÎãàÌéòÏä§Ìä∏ Ïó∞Í≤∞ -->
    <link rel="manifest" href="manifest.json">
    
    <!-- ÏïÑÏù¥ÏΩò ÏÑ§Ï†ï -->
    <link rel="icon" href="icon-192.png" type="image/png">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- ÌÖåÎßà Ïª¨Îü¨ -->
    <meta name="theme-color" content="#E50914">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            color: white;
            font-family: Arial, sans-serif;
            overflow: hidden;
        }
        
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
        }
        
        .netflix-logo {
            font-size: 48px;
            color: #E50914;
            font-weight: bold;
            margin-bottom: 20px;
        }
        
        .spinner {
            border: 4px solid #333;
            border-top: 4px solid #E50914;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .install-prompt {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: #E50914;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            border: none;
            font-size: 16px;
            cursor: pointer;
            z-index: 9999;
            display: none;
        }
        
        .install-prompt:hover {
            background: #b8070f;
        }
        
        #netflix-frame {
            width: 100vw;
            height: 100vh;
            border: none;
            display: none;
        }
    </style>
</head>
<body>
    <div class="loading" id="loading">
        <div class="netflix-logo">NETFLIX</div>
        <div class="spinner"></div>
        <p>Îç∞Ïä§ÌÅ¨ÌÜ± Î™®ÎìúÎ°ú Î°úÎî© Ï§ë...</p>
    </div>
    
    <button class="install-prompt" id="install-btn">üì± Ïï±ÏúºÎ°ú ÏÑ§ÏπòÌïòÍ∏∞</button>
    
    <iframe id="netflix-frame" src="https://www.netflix.com"></iframe>
    
    <script>
        // PWA ÏÑ§Ïπò Í¥ÄÎ†®
        let deferredPrompt;
        const installBtn = document.getElementById('install-btn');
        
        // ÏÑ§Ïπò ÌîÑÎ°¨ÌîÑÌä∏ Ïù¥Î≤§Ìä∏
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.style.display = 'block';
        });
        
        // ÏÑ§Ïπò Î≤ÑÌäº ÌÅ¥Î¶≠
        installBtn.addEventListener('click', async () => {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                
                if (outcome === 'accepted') {
                    console.log('PWA ÏÑ§ÏπòÎê®');
                    installBtn.style.display = 'none';
                } else {
                    console.log('PWA ÏÑ§Ïπò Ï∑®ÏÜåÎê®');
                }
                deferredPrompt = null;
            }
        });
        
        // ÏÑ§Ïπò ÏôÑÎ£å Ïù¥Î≤§Ìä∏
        window.addEventListener('appinstalled', () => {
            console.log('PWAÍ∞Ä Ìôà ÌôîÎ©¥Ïóê ÏÑ§ÏπòÎêòÏóàÏäµÎãàÎã§');
            installBtn.style.display = 'none';
        });
        
        // ÌéòÏù¥ÏßÄ Î°úÎìú ÏôÑÎ£å ÌõÑ
        window.addEventListener('load', async () => {
            // ÏÑúÎπÑÏä§ ÏõåÏª§ Îì±Î°ù
            if ('serviceWorker' in navigator) {
                try {
                    const registration = await navigator.serviceWorker.register('./sw.js');
                    console.log('SW Îì±Î°ù ÏÑ±Í≥µ:', registration.scope);
                } catch (error) {
                    console.error('SW Îì±Î°ù Ïã§Ìå®:', error);
                }
            }
            
            // PWA Ï¥àÍ∏∞Ìôî Ïä§ÌÅ¨Î¶ΩÌä∏ Î°úÎìú
            const script = document.createElement('script');
            script.src = './pwa-init.js';
            document.head.appendChild(script);
            
            // 3Ï¥à ÌõÑ Netflix ÌîÑÎ†àÏûÑ ÌëúÏãú
            setTimeout(() => {
                document.getElementById('loading').style.display = 'none';
                document.getElementById('netflix-frame').style.display = 'block';
            }, 3000);
        });
        
        // ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§ (iframe ÎÇ¥ÏóêÏÑú ÏûëÎèô ÏïàÌï† Ïàò ÏûàÏùå)
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'i') {
                e.preventDefault();
                if (installBtn.style.display === 'none') {
                    installBtn.style.display = 'block';
                } else {
                    installBtn.style.display = 'none';
                }
            }
        });
    </script>
</body>
</html>