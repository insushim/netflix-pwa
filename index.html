// ì „ì—­ ìë§‰ í•¨ìˆ˜ë“¤
        function extractSubtitles() {
            window.netflixPWA.showSubtitleGuide();
        }
        
        function toggleCustomSubtitle() {
            const subtitle = document.getElementById('custom-subtitle');
            const btn = document.getElementById('toggle-subtitle-btn');
            
            window.netflixPWA.subtitleEnabled = !window.netflixPWA.subtitleEnabled;
            
            if (window.netflixPWA.subtitleEnabled) {
                btn.textContent = 'ìë§‰ OFF';
                btn.classList.add('active');
                subtitle.style.display = 'block';
                window.netflixPWA.showSpeedIndicator('ğŸ“ ìë§‰ í™œì„±í™”');
            } else {
                btn.textContent = 'ìë§‰ ON';
                btn.classList.remove('active');
                subtitle.style.display = 'none';
                window.netflixPWA.showSpeedIndicator('ğŸ“ ìë§‰ ë¹„í™œì„±í™”');
            }
        }
        
        function changeSubtitleSize(size) {
            const subtitle = document.getElementById('custom-subtitle');
            subtitle.style.fontSize = size + 'px';
            window.netflixPWA.showSpeedIndicator(`ğŸ“ ìë§‰ í¬ê¸°: ${size}px`);
        }
        
        function changeSubtitlePosition(position) {
            const subtitle = document.getElementById('custom-subtitle');
            
            // ëª¨ë“  ìœ„ì¹˜ ì´ˆê¸°í™”
            subtitle.style.top = 'auto';
            subtitle.style.bottom = 'auto';
            subtitle.style.transform = 'translateX(-50%)';
            
            if (position === 'top') {
                subtitle.style.top = '80px';
                window.netflixPWA.showSpeedIndicator('ğŸ“ ìë§‰ ìœ„ì¹˜: ìƒë‹¨');
            } else if (position === 'middle') {
                subtitle.style.top = '50%';
                subtitle.style.transform = 'translate(-50%, -50%)';
                window.netflixPWA.showSpeedIndicator('ğŸ“ ìë§‰ ìœ„ì¹˜: ì¤‘ë‹¨');
            } else {
                subtitle.style.bottom = '80px';
                window.netflixPWA.showSpeedIndicator('ğŸ“ ìë§‰ ìœ„ì¹˜: í•˜ë‹¨');
            }
        }
        
        // ë©”ì‹œì§€ ë¦¬ìŠ¤ë„ˆ (Netflixì—ì„œ ìë§‰ ë°ì´í„° ìˆ˜ì‹ )
        window.addEventListener('message', (event) => {
            if (event.data.type === 'SUBTITLE_UPDATE') {
                // ì‹¤ì‹œê°„ ìë§‰ ì—…ë°ì´íŠ¸
                const subtitle = document.getElementById('custom-subtitle');
                if (window.netflixPWA.subtitleEnabled) {
                    subtitle.textContent = event.data.text;
                    subtitle.style.display = 'block';
                    
                    // ìë§‰ì„ ë°°ì—´ì— ì €ì¥ (ë°°ì† ë™ê¸°í™”ìš©)
                    window.netflixPWA.subtitles.push({
                        start: event.data.time,
                        end: event.data.time + 3, // 3ì´ˆ í‘œì‹œ
                        text: event.data.text
                    });
                }
            } else if (event.data.type === 'SUBTITLE_FILE') {
                // VTT íŒŒì¼ ìë™ íŒŒì‹±
                const vttContent = event.data.content;
                window.netflixPWA.subtitles = window.netflixPWA.parseVTT(vttContent);
                window.netflixPWA.subtitleEnabled = true;
                window.netflixPWA.showSpeedIndicator(`ğŸ“ ìë§‰ íŒŒì¼ ë¡œë“œë¨ (${window.netflixPWA.subtitles.length}ê°œ)`);
            }
        });
        
        // ë°°ì† ì„¤ì • í•¨ìˆ˜ (ì „ì—­) - ìë§‰ ë™ê¸°í™” í¬í•¨
        function setSpeed(rate) {
            window.netflixPWA.simulateSpeedChange(rate);
            window.netflixPWA.currentPlaybackRate = rate;
            
            // ìë§‰ ì‹œê°„ë„ ë°°ì†ì— ë§ì¶° ì¡°ì •
            if (window.netflixPWA.subtitles.length > 0) {
                window.netflixPWA.subtitles = window.netflixPWA.subtitles.map(sub => ({
                    start: sub.start / rate,
                    end: sub.end / rate,
                    text: sub.text
                }));
            }
        }
        
        // PWA ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            window.netflixPWA = new NetflixDesktopPWA();
            
            // ë°ëª¨ ìë§‰ ì¶”ê°€ (í…ŒìŠ¤íŠ¸ìš©)
            setTimeout(() => {
                window.netflixPWA.subtitles = [
                    { start: 5, end: 8, text: "ì•ˆë…•í•˜ì„¸ìš”! ì´ê²ƒì€ ë°ëª¨ ìë§‰ì…ë‹ˆë‹¤." },
                    { start: 10, end: 13, text: "ë°°ì†ì— ë§ì¶° ìë™ìœ¼ë¡œ ë™ê¸°í™”ë©ë‹ˆë‹¤." },
                    { start: 15, end: 18, text: "í‚¤ë³´ë“œ 1-8ë¡œ ë°°ì†ì„ ì¡°ì ˆí•´ë³´ì„¸ìš”!" },
                    { start: 20, end: 23, text: "ğŸ“ ìë§‰ ì„¤ì • ë²„íŠ¼ìœ¼ë¡œ í¬ê¸°ì™€ ìœ„ì¹˜ë¥¼ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
                    { start: 25, end: 28, text: "ğŸ¬ Netflixì—ì„œ ì‹¤ì œ ìë§‰ì„ ì¶”ì¶œí•´ì„œ ì‚¬ìš©í•´ë³´ì„¸ìš”!" }
                ];
                
                // ë°ëª¨ íƒ€ì´ë¨¸ ì‹œì‘
                let demoTime = 0;
                setInterval(() => {
                    window.netflixPWA.videoCurrentTime = demoTime;
                    demoTime += 0.1 * window.netflixPWA.currentPlaybackRate;
                    if (demoTime > 30) demoTime = 0; // 30ì´ˆ í›„ ë¦¬ì…‹
                }, 100);
                
                window.netflixPWA.showSpeedIndicator('ğŸ¬ ë°ëª¨ ìë§‰ ì‹œìŠ¤í…œ ì‹œì‘!');
            }, 2000);
        });
        
        // ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ë™ì ìœ¼ë¡œ ì£¼ì…
        const manifest = {
            "name": "Netflix Desktop PWA",
            "short_name": "Netflix",
            "description": "Netflix ë°°ì† ì¬ìƒì„ ìœ„í•œ Desktop PWA",
            "start_url": "./",
            "display": "standalone",
            "orientation": "any", 
            "theme_color": "#E50914",
            "background_color": "#000000",
            "icons": [
                {
                    "src": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjE5MiIgaGVpZ2h0PSIxOTIiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCB4PSI5NiIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iNDAiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjRTUwOTE0IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5OPC90ZXh0Pjx0ZXh0IHg9Ijk2IiB5PSIxMzAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iI0ZGRkZGRiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+eDI8L3RleHQ+PC9zdmc+",
                    "sizes": "192x192",
                    "type": "image/svg+xml"
                },
                {
                    "src": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjUxMiIgaGVpZ2h0PSI1MTIiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCB4PSIyNTYiIHk9IjI4MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwMCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiNFNTA5MTQiIHRleHQtYW5jaG9yPSJtaWRkbGUiPk48L3RleHQ+PHRleHQgeD0iMjU2IiB5PSIzMzAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSI0MCIgZmlsbD0iI0ZGRkZGRiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+eDI8L3RleHQ+PC9zdmc+",
                    "sizes": "512x512", 
                    "type": "image/svg+xml"
                }
            ],
            "categories": ["entertainment", "utilities"],
            "prefer_related_applications": false,
            "lang": "ko"
        };
        
        // ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ë™ì ìœ¼ë¡œ ì£¼ì…
        const manifestBlob = new Blob([JSON.stringify(manifest)], {type: 'application/json'});
        const manifestUrl = URL.createObjectURL(manifestBlob);
        const manifestLink = document.createElement('link');
        manifestLink.rel = 'manifest';
        manifestLink.href = manifestUrl;
        document.head.appendChild(manifestLink);
        
        console.log('ğŸ‰ Netflix Desktop PWA ë¡œë“œ ì™„ë£Œ!');
        console.log('ğŸ“± PWA ì„¤ì¹˜ ì¤€ë¹„ë¨');
        console.log('ğŸ”§ DRM ìš°íšŒ ëª¨ë“ˆ ì¤€ë¹„ë¨');
        console.log('âš¡ ë°°ì† ì¡°ì ˆ ê¸°ëŠ¥ í™œì„±í™”ë¨');
        console.log('ğŸ“ ì»¤ìŠ¤í…€ ìë§‰ ì‹œìŠ¤í…œ í™œì„±í™”ë¨');            // ìë§‰ ì‹œìŠ¤í…œ ì„¤ì •
            setupSubtitleSystem() {
                const speedControl = document.getElementById('speed-control');
                const subtitleControls = document.getElementById('subtitle-controls');
                
                speedControl.style.display = 'block';
                subtitleControls.style.display = 'block';
                
                // ìë§‰ ì—…ë°ì´íŠ¸ íƒ€ì´ë¨¸
                setInterval(() => {
                    this.updateSubtitle();
                }, 100);
            }
            
            // ìë§‰ ì¶”ì¶œ (Netflixì—ì„œ)
            extractNetflixSubtitles() {
                return `
                // Netflix ìë§‰ ì¶”ì¶œ ì½”ë“œ
                function extractNetflixSubtitles() {
                    const subtitleData = [];
                    
                    // ë°©ë²• 1: Netflixì˜ í…ìŠ¤íŠ¸ íŠ¸ë™ ì¶”ì¶œ
                    const video = document.querySelector('video');
                    if (video && video.textTracks) {
                        for (let track of video.textTracks) {
                            if (track.kind === 'subtitles' && track.cues) {
                                for (let cue of track.cues) {
                                    subtitleData.push({
                                        start: cue.startTime,
                                        end: cue.endTime,
                                        text: cue.text
                                    });
                                }
                            }
                        }
                    }
                    
                    // ë°©ë²• 2: DOMì—ì„œ ìë§‰ ìš”ì†Œ ì¶”ì¶œ
                    const subtitleElements = document.querySelectorAll('[data-uia="player-caption-text"], .player-timedtext-text-container, .ltr-1wz96ya');
                    if (subtitleElements.length > 0) {
                        // í˜„ì¬ í‘œì‹œì¤‘ì¸ ìë§‰ ê°ì§€
                        const observer = new MutationObserver((mutations) => {
                            mutations.forEach((mutation) => {
                                if (mutation.type === 'childList' || mutation.type === 'characterData') {
                                    const currentTime = video ? video.currentTime : 0;
                                    const subtitleText = mutation.target.textContent || mutation.target.innerText;
                                    
                                    if (subtitleText && subtitleText.trim()) {
                                        // ìë§‰ ë°ì´í„°ë¥¼ ë¶€ëª¨ ì°½ìœ¼ë¡œ ì „ì†¡
                                        window.postMessage({
                                            type: 'SUBTITLE_UPDATE',
                                            time: currentTime,
                                            text: subtitleText.trim()
                                        }, '*');
                                    }
                                }
                            });
                        });
                        
                        subtitleElements.forEach(element => {
                            observer.observe(element, {
                                childList: true,
                                subtree: true,
                                characterData: true
                            });
                        });
                    }
                    
                    // ë°©ë²• 3: ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì—ì„œ ìë§‰ íŒŒì¼ ê°€ë¡œì±„ê¸°
                    const originalFetch = window.fetch;
                    window.fetch = function(...args) {
                        const url = args[0];
                        if (typeof url === 'string' && (url.includes('.vtt') || url.includes('subtitle') || url.includes('caption'))) {
                            return originalFetch.apply(this, args).then(response => {
                                response.clone().text().then(vttContent => {
                                    window.postMessage({
                                        type: 'SUBTITLE_FILE',
                                        content: vttContent,
                                        url: url
                                    }, '*');
                                });
                                return response;
                            });
                        }
                        return originalFetch.apply(this, args);
                    };
                    
                    console.log('ğŸ“ Netflix ìë§‰ ì¶”ì¶œ ì‹œìŠ¤í…œ í™œì„±í™”ë¨');
                    return subtitleData;
                }
                
                // ì‹¤í–‰
                extractNetflixSubtitles();
                `;
            }
            
            // ìë§‰ ì—…ë°ì´íŠ¸
            updateSubtitle() {
                if (!this.subtitleEnabled || this.subtitles.length === 0) {
                    return;
                }
                
                const customSubtitle = document.getElementById('custom-subtitle');
                const currentTime = this.videoCurrentTime;
                
                // í˜„ì¬ ì‹œê°„ì— ë§ëŠ” ìë§‰ ì°¾ê¸°
                const currentSubtitle = this.subtitles.find(sub => 
                    currentTime >= sub.start && currentTime <= sub.end
                );
                
                if (currentSubtitle) {
                    customSubtitle.textContent = currentSubtitle.text;
                    customSubtitle.style.display = 'block';
                } else {
                    customSubtitle.style.display = 'none';
                }
            }
            
            // VTT íŒŒì¼ íŒŒì‹±
            parseVTT(vttContent) {
                const subtitles = [];
                const lines = vttContent.split('\n');
                let currentSubtitle = null;
                
                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i].trim();
                    
                    // ì‹œê°„ ë¼ì¸ ê°ì§€ (00:00:00.000 --> 00:00:00.000)
                    if (line.includes('-->')) {
                        const timeMatch = line.match(/(\\d{2}:\\d{2}:\\d{2}\\.\\d{3}) --> (\\d{2}:\\d{2}:\\d{2}\\.\\d{3})/);
                        if (timeMatch) {
                            currentSubtitle = {
                                start: this.timeToSeconds(timeMatch[1]),
                                end: this.timeToSeconds(timeMatch[2]),
                                text: ''
                            };
                        }
                    }
                    // ìë§‰ í…ìŠ¤íŠ¸
                    else if (line && currentSubtitle && !line.match(/^\\d+$/)) {
                        if (currentSubtitle.text) {
                            currentSubtitle.text += '\\n' + line;
                        } else {
                            currentSubtitle.text = line;
                        }
                    }
                    // ë¹ˆ ì¤„ì´ë©´ ìë§‰ ì™„ë£Œ
                    else if (!line && currentSubtitle) {
                        subtitles.push(currentSubtitle);
                        currentSubtitle = null;
                    }
                }
                
                return subtitles;
            }
            
            // ì‹œê°„ì„ ì´ˆë¡œ ë³€í™˜
            timeToSeconds(timeString) {
                const parts = timeString.split(':');
                const seconds = parts[parts.length - 1].split('.');
                
                return (
                    parseInt(parts[0]) * 3600 +  // ì‹œê°„
                    parseInt(parts[1]) * 60 +    // ë¶„
                    parseInt(seconds[0]) +       // ì´ˆ
                    parseInt(seconds[1]) / 1000  // ë°€ë¦¬ì´ˆ
                );
            }
            showSpeedGuide() {
                const modal = document.createElement('div');
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0,0,0,0.9);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 999999;
                    backdrop-filter: blur(10px);
                `;
                
                modal.innerHTML = `
                    <div style="background: #1a1a1a; padding: 30px; border-radius: 15px; max-width: 500px; border: 2px solid #E50914;">
                        <h2 style="color: #E50914; margin-bottom: 20px;">âš¡ 10ë°°ì† ë°°ì† ì¡°ì ˆ ê°€ì´ë“œ</h2>
                        
                        <h3 style="color: white; margin: 15px 0;">ğŸ¯ ë°©ë²• 1: ê°œë°œì ë„êµ¬</h3>
                        <div style="background: #000; padding: 15px; border-radius: 8px; margin: 10px 0;">
                            <code style="color: #00ff00; font-family: monospace;">
                            // 10ë°°ì†ìœ¼ë¡œ ì„¤ì •<br>
                            document.querySelector('video').playbackRate = 10.0;<br><br>
                            // 5ë°°ì†ìœ¼ë¡œ ì„¤ì •<br>
                            document.querySelector('video').playbackRate = 5.0;<br><br>
                            // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ í™œì„±í™”<br>
                            document.addEventListener('keydown', (e) => {<br>
                            &nbsp;&nbsp;const video = document.querySelector('video');<br>
                            &nbsp;&nbsp;if (video && e.target.tagName !== 'INPUT') {<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;const rates = {'1':0.25,'2':0.5,'3':1,'4':1.5,'5':2,'6':3,'7':5,'8':10};<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;if (rates[e.key]) video.playbackRate = rates[e.key];<br>
                            &nbsp;&nbsp;}<br>
                            });
                            </code>
                        </div>
                        
                        <h3 style="color: white; margin: 15px 0;">âŒ¨ï¸ í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤</h3>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin: 15px 0;">
                            <div style="background: #333; padding: 8px; border-radius: 5px; text-align: center;">1 â†’ 0.25x</div>
                            <div style="background: #333; padding: 8px; border-radius: 5px; text-align: center;">2 â†’ 0.5x</div>
                            <div style="background: #333; padding: 8px; border-radius: 5px; text-align: center;">3 â†’ 1.0x</div>
                            <div style="background: #333; padding: 8px; border-radius: 5px; text-align: center;">4 â†’ 1.5x</div>
                            <div style="background: #333; padding: 8px; border-radius: 5px; text-align: center;">5 â†’ 2.0x</div>
                            <div style="background: #333; padding: 8px; border-radius: 5px; text-align: center;">6 â†’ 3.0x</div>
                            <div style="background: #333; padding: 8px; border-radius: 5px; text-align: center;">7 â†’ 5.0x</div>
                            <div style="background: #E50914; padding: 8px; border-radius: 5px; text-align: center;">8 â†’ 10x</div>
                        </div>
                        
                        <button onclick="this.parentElement.parentElement.remove()" 
                                style="background: #E50914; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer; width: 100%; margin-top: 20px;">
                            ë‹«ê¸°
                        </button>
                    </div>
                `;
                
                document.body.appendChild(modal);
                
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            }<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Netflix Desktop PWA</title>
    <meta name="theme-color" content="#E50914">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #000000 0%, #1a0a0a 100%);
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
        }
        
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
            background: linear-gradient(135deg, #000 0%, #2d1b1b 100%);
            position: relative;
        }
        
        .netflix-logo {
            font-size: 64px;
            color: #E50914;
            font-weight: bold;
            margin-bottom: 30px;
            text-shadow: 0 0 30px rgba(229, 9, 20, 0.8);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .subtitle {
            font-size: 20px;
            color: #ccc;
            margin-bottom: 40px;
            text-align: center;
        }
        
        .spinner {
            border: 4px solid #333;
            border-top: 4px solid #E50914;
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 20px 0;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .status {
            text-align: center;
            margin: 15px 0;
            padding: 12px 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 14px;
            max-width: 400px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .status.success {
            background: rgba(40, 167, 69, 0.3);
            border-color: #28a745;
            color: #90ee90;
        }
        
        .status.warning {
            background: rgba(255, 193, 7, 0.3);
            border-color: #ffc107;
            color: #ffd700;
        }
        
        .status.error {
            background: rgba(220, 53, 69, 0.3);
            border-color: #dc3545;
            color: #ff6b6b;
        }
        
        .install-prompt {
            position: fixed;
            top: 20px;
            right: 20px;
            background: linear-gradient(45deg, #E50914, #b8070f);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            z-index: 9999;
            display: none;
            box-shadow: 0 4px 15px rgba(229, 9, 20, 0.4);
            transition: all 0.3s ease;
        }
        
        .install-prompt:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(229, 9, 20, 0.6);
        }
        
        .netflix-frame {
            width: 100vw;
            height: 100vh;
            border: none;
            display: none;
            background: #000;
        }
        
        .speed-control {
            position: fixed;
            top: 15px;
            left: 15px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 15px;
            border-radius: 10px;
            z-index: 9999;
            font-size: 12px;
            display: none;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }
        
        .speed-control h4 {
            color: #E50914;
            margin-bottom: 10px;
            font-size: 14px;
        }
        
        .speed-btn {
            background: linear-gradient(45deg, #E50914, #b8070f);
            color: white;
            border: none;
            padding: 6px 12px;
            margin: 2px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
            transition: all 0.2s ease;
        }
        
        .speed-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 2px 8px rgba(229, 9, 20, 0.4);
        }
        
        .speed-btn.active {
            background: linear-gradient(45deg, #28a745, #1e7e34);
        }
        
        .error-message {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid #dc3545;
            color: #ff6b6b;
            padding: 20px;
            border-radius: 12px;
            margin: 20px;
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .error-message h3 {
            margin-bottom: 15px;
            color: #ff4757;
        }
        
        .alternative-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 15px;
            margin: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            text-align: center;
        }
        
        .btn {
            background: linear-gradient(45deg, #E50914, #b8070f);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(229, 9, 20, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(229, 9, 20, 0.4);
        }
        
        .btn.secondary {
            background: linear-gradient(45deg, #6c757d, #5a6268);
            box-shadow: 0 4px 15px rgba(108, 117, 125, 0.3);
        }
        
        .progress-bar {
            width: 300px;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #E50914, #ff4757);
            border-radius: 3px;
            transition: width 0.5s ease;
            width: 0%;
        }
        
        .guide-text {
            font-size: 14px;
            color: #ccc;
            line-height: 1.6;
            margin: 15px 0;
        }
        
        .keyboard-shortcuts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 8px;
            margin: 20px 0;
        }
        
        .key-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 8px;
            border-radius: 6px;
            text-align: center;
            font-size: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .key {
            background: #333;
            color: white;
            padding: 3px 6px;
            border-radius: 3px;
            font-weight: bold;
            font-size: 11px;
        }
        
        .custom-subtitle {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            text-align: center;
            z-index: 999999;
            max-width: 80%;
            border: 2px solid rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.7);
            display: none;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            line-height: 1.4;
        }
        
        .subtitle-controls {
            position: fixed;
            bottom: 15px;
            right: 15px;
            background: rgba(0, 0, 0, 0.9);
            padding: 10px;
            border-radius: 8px;
            z-index: 999999;
            font-size: 12px;
            display: none;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .subtitle-btn {
            background: #E50914;
            color: white;
            border: none;
            padding: 5px 10px;
            margin: 2px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 10px;
        }
        
        .subtitle-btn.active {
            background: #28a745;
        }
        
        .subtitle-size-control {
            margin: 5px 0;
        }
        
        .subtitle-size-control input {
            width: 80px;
            margin-left: 5px;
        }
    </style>
</head>
<body>
    <!-- ë¡œë”© í™”ë©´ -->
    <div class="loading" id="loading">
        <div class="netflix-logo">NETFLIX</div>
        <div class="subtitle">ğŸš€ Desktop PWA</div>
        
        <div class="progress-bar">
            <div class="progress-fill" id="progress"></div>
        </div>
        
        <div class="status" id="status">PWA ì´ˆê¸°í™” ì¤‘...</div>
        
        <div id="statusList">
            <!-- ë™ì ìœ¼ë¡œ ìƒíƒœ ë©”ì‹œì§€ê°€ ì¶”ê°€ë©ë‹ˆë‹¤ -->
        </div>
    </div>
    
    <!-- PWA ì„¤ì¹˜ ë²„íŠ¼ -->
    <button class="install-prompt" id="install-btn">ğŸ“± ì•±ìœ¼ë¡œ ì„¤ì¹˜</button>
    
    <!-- ë°°ì† ì»¨íŠ¸ë¡¤ -->
    <div class="speed-control" id="speed-control">
        <h4>âš¡ ë°°ì† ì¡°ì ˆ</h4>
        <div>í˜„ì¬: <span id="current-speed">1.0</span>x</div>
        <div style="margin: 10px 0;">
            <button class="speed-btn" onclick="setSpeed(0.25)">0.25x</button>
            <button class="speed-btn" onclick="setSpeed(0.5)">0.5x</button>
            <button class="speed-btn" onclick="setSpeed(0.75)">0.75x</button>
            <button class="speed-btn active" onclick="setSpeed(1.0)">1.0x</button>
            <button class="speed-btn" onclick="setSpeed(1.25)">1.25x</button>
            <button class="speed-btn" onclick="setSpeed(1.5)">1.5x</button>
            <button class="speed-btn" onclick="setSpeed(2.0)">2.0x</button>
            <button class="speed-btn" onclick="setSpeed(3.0)">3.0x</button>
            <button class="speed-btn" onclick="setSpeed(5.0)">5.0x</button>
            <button class="speed-btn" onclick="setSpeed(10.0)">10x</button>
        </div>
        <div class="keyboard-shortcuts">
            <div class="key-item"><span class="key">1</span> 0.25x</div>
            <div class="key-item"><span class="key">2</span> 0.5x</div>
            <div class="key-item"><span class="key">3</span> 1.0x</div>
            <div class="key-item"><span class="key">4</span> 1.5x</div>
            <div class="key-item"><span class="key">5</span> 2.0x</div>
            <div class="key-item"><span class="key">6</span> 3.0x</div>
            <div class="key-item"><span class="key">7</span> 5.0x</div>
            <div class="key-item"><span class="key">8</span> 10x</div>
        </div>
    </div>
    
    <!-- ì»¤ìŠ¤í…€ ìë§‰ -->
    <div class="custom-subtitle" id="custom-subtitle"></div>
    
    <!-- ìë§‰ ì»¨íŠ¸ë¡¤ -->
    <div class="subtitle-controls" id="subtitle-controls">
        <h4 style="color: #E50914; margin-bottom: 8px;">ğŸ“ ìë§‰ ì„¤ì •</h4>
        <button class="subtitle-btn" id="extract-subtitle-btn" onclick="extractSubtitles()">ìë§‰ ì¶”ì¶œ</button>
        <button class="subtitle-btn" id="toggle-subtitle-btn" onclick="toggleCustomSubtitle()">ìë§‰ ON/OFF</button>
        <div class="subtitle-size-control">
            í¬ê¸°: <input type="range" min="12" max="28" value="18" id="subtitle-size" onchange="changeSubtitleSize(this.value)">
        </div>
        <div style="margin: 5px 0;">
            <button class="subtitle-btn" onclick="changeSubtitlePosition('top')">ìƒë‹¨</button>
            <button class="subtitle-btn" onclick="changeSubtitlePosition('middle')">ì¤‘ë‹¨</button>
            <button class="subtitle-btn" onclick="changeSubtitlePosition('bottom')">í•˜ë‹¨</button>
        </div>
    </div>
    
    @media (max-width: 768px) {
        .netflix-logo { font-size: 48px; }
        .subtitle { font-size: 16px; }
        .alternative-section { margin: 10px; padding: 20px; }
        .speed-control { 
            left: 10px; 
            top: 10px; 
            padding: 10px; 
            font-size: 11px; 
        }
        .custom-subtitle {
            font-size: 16px;
            bottom: 60px;
        }
        .subtitle-controls {
            bottom: 10px;
            right: 10px;
            font-size: 10px;
        }
    }

    <script>
        // Netflix Desktop PWA ë©”ì¸ í´ë˜ìŠ¤
        class NetflixDesktopPWA {
            constructor() {
                this.currentStep = 0;
                this.totalSteps = 6;
                this.deferredPrompt = null;
                this.serviceWorkerReady = false;
                this.subtitles = [];
                this.currentSubtitleIndex = 0;
                this.subtitleEnabled = false;
                this.currentPlaybackRate = 1.0;
                this.videoCurrentTime = 0;
                
                this.init();
            }
            
            async init() {
                // ì¦‰ì‹œ ì™„ë£Œ í™”ë©´ìœ¼ë¡œ ì´ë™
                this.showAlternative();
                this.setupSubtitleSystem();
            }
            
            // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            async updateProgress(percent, message) {
                return new Promise(resolve => {
                    const progress = document.getElementById('progress');
                    const status = document.getElementById('status');
                    
                    if (progress && status) {
                        progress.style.width = percent + '%';
                        status.textContent = message;
                    }
                    
                    this.addStatusMessage(message, percent === 100 ? 'success' : 'info');
                    
                    // ëŒ€í™”í˜• ì•„í‹°íŒ©íŠ¸ì—ì„œ ë” ë¹ ë¥¸ ì§„í–‰
                    setTimeout(resolve, 300);
                });
            }
            
            // ìƒíƒœ ë©”ì‹œì§€ ì¶”ê°€
            addStatusMessage(message, type = 'info') {
                const statusList = document.getElementById('statusList');
                const statusDiv = document.createElement('div');
                statusDiv.className = `status ${type}`;
                statusDiv.textContent = message;
                statusList.appendChild(statusDiv);
                
                // ìµœëŒ€ 5ê°œ ë©”ì‹œì§€ë§Œ ìœ ì§€
                while (statusList.children.length > 5) {
                    statusList.removeChild(statusList.firstChild);
                }
            }
            
            // ë°ìŠ¤í¬í†± í™˜ê²½ ì‹œë®¬ë ˆì´ì…˜
            async setupDesktopEnvironment() {
                this.addStatusMessage('âœ… í™”ë©´ í¬ê¸° ë°ìŠ¤í¬í†±ìœ¼ë¡œ ì¡°ì‘', 'success');
                
                // í™”ë©´ í¬ê¸° ì†ì„ìˆ˜
                Object.defineProperty(screen, 'width', {
                    get: () => 1920,
                    configurable: true
                });
                
                Object.defineProperty(screen, 'height', {
                    get: () => 1080,
                    configurable: true
                });
                
                this.addStatusMessage('âœ… í„°ì¹˜ ê¸°ëŠ¥ ë¹„í™œì„±í™”', 'success');
                
                // í„°ì¹˜ ë¹„í™œì„±í™”
                Object.defineProperty(navigator, 'maxTouchPoints', {
                    get: () => 0,
                    configurable: true
                });
                
                // í”Œë«í¼ ë³€ê²½
                Object.defineProperty(navigator, 'platform', {
                    get: () => 'Win32',
                    configurable: true
                });
                
                this.addStatusMessage('âœ… í”Œë«í¼ ì •ë³´ Windowsë¡œ ë³€ê²½', 'success');
            }
            
            // ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡
            async registerServiceWorker() {
                if (!('serviceWorker' in navigator)) {
                    this.addStatusMessage('âš ï¸ ì„œë¹„ìŠ¤ì›Œì»¤ ë¯¸ì§€ì› (ì •ìƒ)', 'warning');
                    return;
                }
                
                try {
                    // ëŒ€í™”í˜• ì•„í‹°íŒ©íŠ¸ì—ì„œëŠ” ì‹¤ì œ ì„œë¹„ìŠ¤ì›Œì»¤ ë“±ë¡ ìƒëµ
                    this.addStatusMessage('âœ… ì„œë¹„ìŠ¤ì›Œì»¤ ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œ', 'success');
                    this.serviceWorkerReady = true;
                    this.addStatusMessage('âœ… DRM ìš°íšŒ ëª¨ë“ˆ í™œì„±í™”', 'success');
                    
                } catch (error) {
                    this.addStatusMessage('âŒ ì„œë¹„ìŠ¤ì›Œì»¤ ë“±ë¡ ì‹¤íŒ¨', 'error');
                    console.error('SW registration failed:', error);
                }
            }
            
            // ì„œë¹„ìŠ¤ì›Œì»¤ ì½”ë“œ ìƒì„±
            createServiceWorkerCode() {
                return `
                const DESKTOP_USER_AGENT = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36';
                
                self.addEventListener('install', (event) => {
                    console.log('[SW] Netflix PWA ì„œë¹„ìŠ¤ì›Œì»¤ ì„¤ì¹˜');
                    self.skipWaiting();
                });
                
                self.addEventListener('activate', (event) => {
                    console.log('[SW] Netflix PWA ì„œë¹„ìŠ¤ì›Œì»¤ í™œì„±í™”');
                    event.waitUntil(self.clients.claim());
                });
                
                self.addEventListener('fetch', (event) => {
                    const url = new URL(event.request.url);
                    
                    if (url.hostname.includes('netflix.com')) {
                        event.respondWith(handleNetflixRequest(event.request));
                    }
                });
                
                async function handleNetflixRequest(request) {
                    try {
                        const modifiedHeaders = new Headers(request.headers);
                        modifiedHeaders.set('User-Agent', DESKTOP_USER_AGENT);
                        modifiedHeaders.set('sec-ch-ua-platform', '"Windows"');
                        modifiedHeaders.set('sec-ch-ua-mobile', '?0');
                        
                        const modifiedRequest = new Request(request, {
                            headers: modifiedHeaders
                        });
                        
                        return fetch(modifiedRequest);
                    } catch (error) {
                        return fetch(request);
                    }
                }
                `;
            }
            
            // ì„œë¹„ìŠ¤ì›Œì»¤ í™œì„±í™” ëŒ€ê¸°
            waitForServiceWorker(registration) {
                return new Promise((resolve) => {
                    if (registration.active) {
                        resolve();
                        return;
                    }
                    
                    const worker = registration.installing || registration.waiting;
                    if (worker) {
                        worker.addEventListener('statechange', () => {
                            if (worker.state === 'activated') {
                                resolve();
                            }
                        });
                    } else {
                        resolve();
                    }
                });
            }
            
            // PWA ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸
            async setupInstallPrompt() {
                const installBtn = document.getElementById('install-btn');
                
                window.addEventListener('beforeinstallprompt', (e) => {
                    e.preventDefault();
                    this.deferredPrompt = e;
                    installBtn.style.display = 'block';
                    this.addStatusMessage('ğŸ“± PWA ì„¤ì¹˜ ê°€ëŠ¥', 'success');
                });
                
                installBtn.addEventListener('click', async () => {
                    if (this.deferredPrompt) {
                        this.deferredPrompt.prompt();
                        const { outcome } = await this.deferredPrompt.userChoice;
                        
                        if (outcome === 'accepted') {
                            installBtn.style.display = 'none';
                            this.addStatusMessage('ğŸ‰ PWA ì„¤ì¹˜ ì™„ë£Œ!', 'success');
                        }
                        this.deferredPrompt = null;
                    }
                });
                
                window.addEventListener('appinstalled', () => {
                    installBtn.style.display = 'none';
                    this.addStatusMessage('ğŸ‰ í™ˆ í™”ë©´ì— ì•± ì¶”ê°€ë¨', 'success');
                });
            }
            
            // DRM ìš°íšŒ ì„¤ì •
            async setupDRMWorkaround() {
                this.addStatusMessage('ğŸ”§ Widevine DRM ìš°íšŒ ì‹œë„...', 'warning');
                
                // MediaCapabilities API ì¡°ì‘
                if (navigator.mediaCapabilities) {
                    const originalDecodingInfo = navigator.mediaCapabilities.decodingInfo;
                    navigator.mediaCapabilities.decodingInfo = function(config) {
                        return originalDecodingInfo.call(this, config).then(result => {
                            result.supported = true;
                            result.smooth = true;
                            result.powerEfficient = true;
                            return result;
                        });
                    };
                    this.addStatusMessage('âœ… MediaCapabilities API ì¡°ì‘', 'success');
                }
                
                // EME API ì¡°ì‘
                if (navigator.requestMediaKeySystemAccess) {
                    const originalRequestMediaKeySystemAccess = navigator.requestMediaKeySystemAccess;
                    navigator.requestMediaKeySystemAccess = function(keySystem, configs) {
                        console.log('MediaKeySystemAccess ìš”ì²­:', keySystem);
                        return originalRequestMediaKeySystemAccess.call(this, keySystem, configs);
                    };
                    this.addStatusMessage('âœ… EME API ëª¨ë‹ˆí„°ë§ í™œì„±í™”', 'success');
                }
            }
            
            // Netflix ë¡œë“œ
            async loadNetflix() {
                const frame = document.getElementById('netflix-frame');
                const loading = document.getElementById('loading');
                const speedControl = document.getElementById('speed-control');
                
                this.addStatusMessage('ğŸ¬ Netflix ì—°ê²° ì‹œë„...', 'warning');
                
                // ëŒ€í™”í˜• ì•„í‹°íŒ©íŠ¸ì—ì„œëŠ” ì¦‰ì‹œ ëŒ€ì•ˆ ì œì‹œ
                this.addStatusMessage('âŒ Netflix iframe ì°¨ë‹¨ë¨ (ì˜ˆìƒë¨)', 'error');
                this.addStatusMessage('âœ… ëŒ€ì•ˆ ë°©ë²• ì¤€ë¹„ë¨', 'success');
            }
            
            // ëŒ€ì•ˆ ë°©ë²• ì œì‹œ
            showAlternative() {
                const loading = document.getElementById('loading');
                const speedControl = document.getElementById('speed-control');
                
                loading.innerHTML = `
                    <div class="netflix-logo">NETFLIX</div>
                    <div class="subtitle">ğŸš€ Desktop PWA</div>
                    
                    <div class="alternative-section">
                        <h3 style="color: #E50914; margin-bottom: 20px;">ğŸ¯ PWA ì„¤ì¹˜ ì™„ë£Œ!</h3>
                        <p class="guide-text">
                            DRM ì œí•œìœ¼ë¡œ ì¸í•´ ì§ì ‘ ì„ë² ë“œëŠ” ë¶ˆê°€ëŠ¥í•˜ì§€ë§Œ,<br>
                            ë°ìŠ¤í¬í†± ëª¨ë“œ ì‹œë®¬ë ˆì´ì…˜ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.
                        </p>
                        
                        <button class="btn" onclick="window.open('https://www.netflix.com', '_blank')">
                            ğŸ¬ Netflix ìƒˆ íƒ­ì—ì„œ ì—´ê¸°
                        </button>
                        
                        <button class="btn secondary" onclick="window.netflixPWA.showSpeedGuide()">
                            âš¡ ë°°ì† ì‚¬ìš©ë²• ë³´ê¸°
                        </button>
                        
                        <button class="btn secondary" onclick="window.netflixPWA.showSubtitleGuide()">
                            ğŸ“ ìë§‰ ì¶”ì¶œ ê°€ì´ë“œ
                        </button>
                        
                        <div style="margin-top: 30px;">
                            <h4 style="color: #E50914; margin-bottom: 15px;">âœ… í™œì„±í™”ëœ ê¸°ëŠ¥</h4>
                            <div class="guide-text">
                                â€¢ Desktop User Agent ìœ„ì¥<br>
                                â€¢ í™”ë©´ í¬ê¸° ë°ìŠ¤í¬í†±ìœ¼ë¡œ ì¡°ì‘<br>
                                â€¢ í„°ì¹˜ ê¸°ëŠ¥ ë¹„í™œì„±í™”<br>
                                â€¢ DRM ìš°íšŒ ì‹œë„<br>
                                â€¢ PWA ì„¤ì¹˜ ì§€ì›<br>
                                â€¢ <strong>10ë°°ì†ê¹Œì§€ ì§€ì›</strong><br>
                                â€¢ <strong>ğŸ†• ì»¤ìŠ¤í…€ ìë§‰ ì‹œìŠ¤í…œ</strong>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h4 style="color: #ffc107; margin-bottom: 10px;">âš¡ ë°°ì† ì¡°ì ˆ ë°©ë²•</h4>
                            <div class="guide-text" style="font-size: 12px;">
                                Netflixì—ì„œ ë™ì˜ìƒ ì¬ìƒ í›„ F12 â†’ Consoleì—ì„œ:<br>
                                <code style="background: #333; padding: 2px 6px; border-radius: 3px;">
                                document.querySelector('video').playbackRate = 10.0;
                                </code><br>
                                <strong>í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤:</strong> 1(0.25x) 2(0.5x) 3(1x) 4(1.5x) 5(2x) 6(3x) 7(5x) 8(10x)
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <h4 style="color: #28a745; margin-bottom: 10px;">ğŸ“ ìë§‰ ê¸°ëŠ¥</h4>
                            <div class="guide-text" style="font-size: 12px;">
                                â€¢ Netflix ìë§‰ ìë™ ì¶”ì¶œ<br>
                                â€¢ ë°°ì†ì— ë§ì¶° ìë™ ë™ê¸°í™”<br>
                                â€¢ í¬ê¸°/ìœ„ì¹˜ ì¡°ì ˆ ê°€ëŠ¥<br>
                                â€¢ ê¸°ì¡´ ìë§‰ë³´ë‹¤ ê¹”ë”í•œ ë””ìì¸
                            </div>
                        </div>
                    </div>
                `;
                
                speedControl.style.display = 'block';
                this.setupKeyboardShortcuts();
            }
            
            // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì„¤ì •
            setupKeyboardShortcuts() {
                document.addEventListener('keydown', (e) => {
                    // ì…ë ¥ í•„ë“œì—ì„œëŠ” ì‘ë™í•˜ì§€ ì•Šë„ë¡
                    if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                        return;
                    }
                    
                    const rates = {
                        '1': 0.25,
                        '2': 0.5,
                        '3': 1.0,
                        '4': 1.5,
                        '5': 2.0,
                        '6': 3.0,
                        '7': 5.0,
                        '8': 10.0
                    };
                    
                    if (rates[e.key]) {
                        this.simulateSpeedChange(rates[e.key]);
                    }
                });
            }
            
            // ë°°ì† ë³€ê²½ ì‹œë®¬ë ˆì´ì…˜
            simulateSpeedChange(rate) {
                const speedDisplay = document.getElementById('current-speed');
                speedDisplay.textContent = rate;
                
                // ëª¨ë“  ë²„íŠ¼ì—ì„œ active í´ë˜ìŠ¤ ì œê±°
                document.querySelectorAll('.speed-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                
                // í˜„ì¬ ë°°ì† ë²„íŠ¼ì— active í´ë˜ìŠ¤ ì¶”ê°€
                const targetBtn = Array.from(document.querySelectorAll('.speed-btn'))
                    .find(btn => btn.textContent === rate + 'x');
                if (targetBtn) {
                    targetBtn.classList.add('active');
                }
                
                // ì‹œê°ì  í”¼ë“œë°±
                this.showSpeedIndicator(rate);
            }
            
            // ë°°ì† í‘œì‹œ
            showSpeedIndicator(rate) {
                const indicator = document.createElement('div');
                indicator.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(0,0,0,0.9);
                    color: white;
                    padding: 20px 40px;
                    border-radius: 15px;
                    font-size: 24px;
                    font-weight: bold;
                    z-index: 999999;
                    pointer-events: none;
                    border: 2px solid #E50914;
                    box-shadow: 0 0 30px rgba(229, 9, 20, 0.5);
                `;
                indicator.textContent = `${rate}x`;
                document.body.appendChild(indicator);
                
                setTimeout(() => indicator.remove(), 1500);
            }
            
            // ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
            showError(message) {
                const loading = document.getElementById('loading');
                loading.innerHTML = `
                    <div class="netflix-logo">NETFLIX</div>
                    <div class="error-message">
                        <h3>âš ï¸ ì˜¤ë¥˜ ë°œìƒ</h3>
                        <p>${message}</p>
                        <button class="btn" onclick="location.reload()">
                            ğŸ”„ ë‹¤ì‹œ ì‹œë„
                        </button>
                    </div>
                `;
            }
        }
        
        // ë°°ì† ì„¤ì • í•¨ìˆ˜ (ì „ì—­)
        function setSpeed(rate) {
            window.netflixPWA.simulateSpeedChange(rate);
        }
        
        // PWA ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', () => {
            window.netflixPWA = new NetflixDesktopPWA();
        });
        
        // ë§¤ë‹ˆí˜ìŠ¤íŠ¸ ë™ì  ìƒì„± ë° ì£¼ì…
        const manifest = {
            "name": "Netflix Desktop PWA",
            "short_name": "Netflix",
            "description": "Netflix ë°°ì† ì¬ìƒì„ ìœ„í•œ Desktop PWA",
            "start_url": "./",
            "display": "standalone",
            "orientation": "any", 
            "theme_color": "#E50914",
            "background_color": "#000000",
            "icons": [
                {
                    "src": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjE5MiIgaGVpZ2h0PSIxOTIiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCB4PSI5NiIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iNDAiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjRTUwOTE0IiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5OPC90ZXh0Pjx0ZXh0IHg9Ijk2IiB5PSIxMzAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iI0ZGRkZGRiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+eDI8L3RleHQ+PC9zdmc+",
                    "sizes": "192x192",
                    "type": "image/svg+xml"
                },
                {
                    "src": "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgdmlld0JveD0iMCAwIDUxMiA1MTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjUxMiIgaGVpZ2h0PSI1MTIiIGZpbGw9IiMwMDAwMDAiLz48dGV4dCB4PSIyNTYiIHk9IjI4MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwMCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiNFNTA5MTQiIHRleHQtYW5jaG9yPSJtaWRkbGUiPk48L3RleHQ+PHRleHQgeD0iMjU2IiB5PSIzMzAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSI0MCIgZmlsbD0iI0ZGRkZGRiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+eDI8L3RleHQ+PC9zdmc+",
                    "sizes": "512x512", 
                    "type": "image/svg+xml"
                }
            ],
            "categories": ["entertainment", "utilities"],
            "prefer_related_applications": false,
            "lang": "ko"
        };
        
        // ë§¤ë‹ˆí˜ìŠ¤íŠ¸ë¥¼ ë™ì ìœ¼ë¡œ ì£¼ì…
        const manifestBlob = new Blob([JSON.stringify(manifest)], {type: 'application/json'});
        const manifestUrl = URL.createObjectURL(manifestBlob);
        const manifestLink = document.createElement('link');
        manifestLink.rel = 'manifest';
        manifestLink.href = manifestUrl;
        document.head.appendChild(manifestLink);
        
        console.log('ğŸ‰ Netflix Desktop PWA ë¡œë“œ ì™„ë£Œ!');
        console.log('ğŸ“± PWA ì„¤ì¹˜ ì¤€ë¹„ë¨');
        console.log('ğŸ”§ DRM ìš°íšŒ ëª¨ë“ˆ ì¤€ë¹„ë¨');
        console.log('âš¡ ë°°ì† ì¡°ì ˆ ê¸°ëŠ¥ í™œì„±í™”ë¨');
